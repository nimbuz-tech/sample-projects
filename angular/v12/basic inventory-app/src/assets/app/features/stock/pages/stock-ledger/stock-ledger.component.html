<div class="header">
  <div>
    <div class="title">Stock</div>
    <div class="sub">IN / OUT movements and adjustments.</div>
  </div>
</div>

<div class="grid">
  <div class="card">
    <div class="card-title">Adjust Stock</div>

    <form [formGroup]="form" (ngSubmit)="apply()" class="form">
      <label>
        <span>Product</span>
        <select class="input" formControlName="productId">
          <option value="">Select</option>
          <option *ngFor="let p of products" [value]="p.id">
            {{ p.sku }} â€” {{ p.name }} (Stock: {{ p.stock }})
          </option>
        </select>
      </label>

      <label>
        <span>Type</span>
        <select class="input" formControlName="type">
          <option value="IN">IN (Add)</option>
          <option value="OUT">OUT (Remove)</option>
          <option value="ADJUST">ADJUST (Signed Qty)</option>
        </select>
      </label>

      <label>
        <span>Qty</span>
        <input class="input" type="number" formControlName="qty" />
      </label>

      <label class="span2">
        <span>Note</span>
        <input class="input" formControlName="note" placeholder="Optional" />
      </label>

      <button class="btn primary span2" type="submit">Apply</button>
    </form>
  </div>

  <div class="card">
    <div class="card-title">Ledger</div>
    <div class="table-wrap">
      <table>
        <thead><tr><th>Date</th><th>Product</th><th>Type</th><th>Qty</th><th>Note</th></tr></thead>
        <tbody>
          <tr *ngFor="let t of txns">
            <td>{{ t.at | date:'medium' }}</td>
            <td>{{ productName(t.productId) }}</td>
            <td><span class="badge">{{ t.type }}</span></td>
            <td>{{ t.qty }}</td>
            <td class="muted">{{ t.note || '-' }}</td>
          </tr>
          <tr *ngIf="txns.length===0"><td colspan="5" class="muted">No transactions yet.</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
